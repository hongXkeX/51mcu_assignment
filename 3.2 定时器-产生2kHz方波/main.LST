C51 COMPILER V9.56.0.0   MAIN                                                              11/17/2016 18:39:10 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: F:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*-----------------------------------------------
   2            名称：通过定时0产生2KHz方波
   3            编写：hongXkeX
   4            日期：2016.11.17
   5            修改：无
   6          ------------------------------------------------*/
   7          
   8          #include "main.h"
   9          
  10          sbit sq = P1^0;     //定义方波输出端口
  11          
  12          /*------------------------------------------------
  13                              主程序
  14          ------------------------------------------------*/
  15          void main()
  16          {
  17   1              init();
  18   1              EA = 1;         //总中断打开
  19   1              while(1) 
  20   1              {
  21   2                                      
  22   2              }               
  23   1      }
  24          
  25          /*------------------------------------------------
  26                       单片机初始化子程序
  27          ------------------------------------------------*/
  28          void init()
  29          {
  30   1              t0_init();
  31   1      }
  32          
  33          /*------------------------------------------------
  34                        定时器0初始化子程序
  35          ------------------------------------------------*/
  36          void t0_init()
  37          {
  38   1              TMOD &= (0xf0);            
  39   1              TMOD |= (0x01);     //使用模式1，16位定时器
  40   1      
  41   1              TH0 = (65536-250)/256;
  42   1              TL0 = (65536-250)%256;
  43   1              
  44   1              ET0 = 1;     //定时器中断打开
  45   1              TR0 = 1;     //定时器开关打开
  46   1      }
  47          
  48          /*------------------------------------------------
  49                          定时器0中断子程序
  50          ------------------------------------------------*/
  51          void t0_isr() interrupt 1
  52          {
  53   1              TH0 = (65536-250)/256;    //重新赋值 12M晶振计算，指令周期1uS
  54   1              TL0 = (65536-250)%256;    //2KHz=0.5mS 半个周期250us  即定时250次
  55   1          
C51 COMPILER V9.56.0.0   MAIN                                                              11/17/2016 18:39:10 PAGE 2   

  56   1          sq = ~sq;                 //用示波器可看到方波输出 
  57   1      }
  58          
  59          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     36    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
