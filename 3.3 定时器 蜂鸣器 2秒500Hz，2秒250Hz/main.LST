C51 COMPILER V9.56.0.0   MAIN                                                              11/18/2016 16:27:21 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: F:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*-----------------------------------------------
   2            名称：蜂鸣器
   3            编写：hongXkeX
   4            日期：2016.11.17
   5            修改：无
   6            内容：蜂鸣器 2s 500Hz 2s 250Hz 如此循环
   7          ------------------------------------------------*/
   8          
   9          #include "main.h"
  10          
  11          u8 k = 0;               
  12          sbit bz = P1^5;
  13          
  14          /*------------------------------------------------
  15                              主程序
  16          ------------------------------------------------*/
  17          void main()
  18          {
  19   1              init();
  20   1              t0_init();
  21   1              EA = 1;         //总中断打开
  22   1              while(1) 
  23   1              {
  24   2                      if(k<=40) {
  25   3                              bz = ~bz;
  26   3                              delay1ms();             //发出大约500Hz的方波 频率越大声音越尖
  27   3                      }else if(k<=80) {
  28   3                              bz = ~bz;
  29   3                              delay2ms();             //发出大约250Hz的方波 频率越大声音越尖
  30   3                              if(k==80) k=0;  
  31   3                      }
  32   2                      
  33   2              }               
  34   1      }
  35          
  36          /*------------------------------------------------
  37                       单片机初始化子程序
  38          ------------------------------------------------*/
  39          void init()
  40          {
  41   1              
  42   1      }
  43          
  44          /*------------------------------------------------
  45                        定时器0初始化子程序
  46          ------------------------------------------------*/
  47          void t0_init()
  48          {
  49   1              TMOD &= (0xf0);            
  50   1              TMOD |= (0x01);     //使用模式1，16位定时器
  51   1      
  52   1              TH0 = (65536-250)/256;
  53   1              TL0 = (65536-250)%256;
  54   1              
  55   1              ET0 = 1;     //定时器中断打开
C51 COMPILER V9.56.0.0   MAIN                                                              11/18/2016 16:27:21 PAGE 2   

  56   1              TR0 = 1;     //定时器开关打开
  57   1      }
  58          
  59          /*------------------------------------------------
  60                          定时器0中断子程序
  61          ------------------------------------------------*/
  62          void t0_isr() interrupt 1
  63          {
  64   1              TH0 = (65536-50000)/256;    
  65   1              TL0 = (65536-50000)%256;   
  66   1          k++;
  67   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     71    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
